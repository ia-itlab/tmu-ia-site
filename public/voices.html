<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="robots" content="noindex">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <link rel="stylesheet" href="./style/main.css">
  <link rel="shortcut icon" href="./images/ファビコン (logo)/favicon.ico">

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script type="text/javascript" src="./javascript/index.js"></script>
  <script type="text/javascript" src="./javascript/language.js"></script>
  <title>ACCESS｜東京都立大学システムデザイン学部インダストリアルアート学科/学域</title>
  <style>
    p {
      font-size: 0.9em;
      line-height: 1.5em;
      padding-top: 0.5em;
    }

    h1 {
      font-size: 1.5em;
    }

    h2 {
      font-size: 1.3em;
    }

    h3 {
      font-size: 1.2em;
    }

    h4 {
      text-align: left;
      font-size: 0.8em;
    }

    h5 {
      text-align: right;
      font-size: 0.8em;
    }

    #voice {
      width: 100%;
    }

    #voice img {
      max-width: 100%;
      padding: 0;

      margin: 15px 0px 0px 0px;
    }

    #voice img.medialeft {
      float: left;
      margin-right: 20px;
    }

    #voice img.mediaright {
      float: right;
      margin-left: 20px;
    }

    em {
      font-style: italic;
    }

    em.u {
      text-decoration: underline;
      font-style: normal;
    }

    strong {
      font-weight: bold;
    }

    .list-group-item {
      background: none;
      background-color: var(--color-background);
      color: var(--color-text);
      transition: all, 1s;
    }

    .list-group-item:hover {
      background: none;
      background-color: var(--color-text);
      color: var(--color-background);
      transition: all, 1s;
    }
  </style>



  <!-- font -->
  <script>
    (function (d) {
      var config = {
        kitId: 'eby3bgi',
        scriptTimeout: 3000,
        async: true
      },
        h = d.documentElement, t = setTimeout(function () { h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive"; }, config.scriptTimeout), tk = d.createElement("script"), f = false, s = d.getElementsByTagName("script")[0], a; h.className += " wf-loading"; tk.src = 'https://use.typekit.net/' + config.kitId + '.js'; tk.async = true; tk.onload = tk.onreadystatechange = function () { a = this.readyState; if (f || a && a != "complete" && a != "loaded") return; f = true; clearTimeout(t); try { Typekit.load(config) } catch (e) { } }; s.parentNode.insertBefore(tk, s)
    })(document);
  </script>

  <script type="text/javascript">
    window.onload = function () {
      initLanguage();
      // URLのGETパラメータから読み込むページを求める
      var url = new URL(window.location.href);
      var params = url.searchParams;
      // 記事番号
      //console.log(params.get('no'));
      var number_page;
      if (!params.get('no')) {
        number_page = 'menu'
      }
      else {
        number_page = params.get('no');
      }


      var loadHTML = new Promise(function (resolve, reject) {
        // ia wiki から topicsデータを取得する
        var url = 'http://industrial-art.sd.tmu.ac.jp/wiki/doku.php\?id=website:voices:' + number_page;
        var regexp = '@<!-- CONTENT -->(.*?)<!-- \/CONTENT -->@s';
        var _html = './php/scrape.php?regexp=' + regexp + '&url=' + url;
        var replace = 'tmp';
        //Httpリクエスを作る
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", _html, true);
        xmlhttp.onreadystatechange = function () {
          //とれた場合Idにそって入れ替え
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            var data = xmlhttp.responseText;
            //xmlhttp.responseXML
            //console.log(data);

            data = data.replace(/\/wiki\/lib\/exe\//g, 'https:\/\/industrial-art.sd.tmu.ac.jp\/wiki\/lib\/exe\/')
            var elem = document.getElementById(replace);
            elem.innerHTML = data;
            resolve(data);
            return data;
          }
        }
        xmlhttp.send(null);

      });
      loadHTML.then(function (data) {

        if (number_page == 'menu') {
          var ols = document.querySelector('.dw-content').querySelectorAll('ol');
          for (ol of ols) {
            var lis = ol.querySelectorAll('li');
            var number = lis[0].querySelector('.li').innerHTML;
            var name = lis[1].querySelector('.li').innerHTML;
            var graduation = lis[2].querySelector('.li').innerHTML;
            var affiliation = lis[3].querySelector('.li').innerHTML;
            var date = lis[4].querySelector('.li').innerHTML;

            // <a href="" class="list-group-item list-group-item-action " aria-current="true">
            //   <div class="d-flex w-100 justify-content-between">
            //     <h5 class="mb-1 h3">インダス花子、2009年卒</h5>
            //     <small class="text-muted">2021年11月5日</small>
            //   </div>
            //   <!-- <p class="mb-"></p> -->
            //   <small class="text-muted">株式会社オノマトペガジェット、企画開発部チーフデザイナー</small>
            // </a>

            var a = document.createElement('a');
            a.classList = "list-group-item list-group-item-action";
            a.href = window.location.href + "?no=" + number.replace(' ', '');
            var div = document.createElement('div');
            div.classList = "d-flex w-100 justify-content-between";
            a.appendChild(div);
            var h5 = document.createElement('h5');
            h5.classList = "mb-1 h5";
            h5.innerHTML = name;
            div.appendChild(h5);
            let span_graduation = document.createElement('span');
            span_graduation.classList = "small text-muted";
            span_graduation.innerHTML = graduation;
            h5.appendChild(span_graduation);
            var small = document.createElement('small');
            small.classList = "text-muted";
            small.innerHTML = date;
            div.appendChild(small);
            var small_affiliation = document.createElement('small');
            small_affiliation.classList.add("text-muted");
            small_affiliation.innerHTML = affiliation;
            a.appendChild(small_affiliation);
            document.querySelector('#list').appendChild(a);
          }
        }
        // 記事ページの場合
        else {
          document.querySelector('#voice').innerHTML = data;

          // img タグについては、読み込んだあとにフェード表示する
          let imgs = document.querySelector('#voice').querySelectorAll('img');

          // img.srcが読み込み終わったら表示してあげる
          // カード画像は全部ロードが終わった後並べ替え作業をする
          for (let img of imgs) {
            img.classList.add('img_fluid');
            img.style.visibility = 'hidden';
            img.onload = function () {
              img.style.visibility = 'visible';
              img.classList.add('fadeIn');
            }
          }
          //console.log(imgs);
        }
        document.getElementById('tmp').remove();
        //console.log(document.querySelector('.wrapper'));
        initLanguage();
      });
    }
  </script>
</head>

<body>
  <nav class="navbar navbar-expand-md  fixed-left" style="background-color:var(--color-header);">
    <header class="logo">
      <script>
        $(".logo").load("./parts/header.html");
      </script>
    </header>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault"
      aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
          fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
            d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
        </svg></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav">
        <script type="text/javascript" src="./javascript/menu.js">

        </script>
      </ul>
    </div>
  </nav>

  <div class="container">
    <div class="centering">
      <main>
        <h2 class="page-title">Voices<span>
            <ja>インダストリアルアート学科の教員やOB/OGとのインタビューを不定期で掲載</ja>
            <en><span class="badge bg-danger" style="color:white">ONLY JAPANESE
              </span></en>
          </span></h2>

        <div id="tmp"></div>
        <div id="voice"> </div>
        <div class="list-group" id="list"> </div>


      </main>

      <footer>
        <script>
          $(" footer").load("./parts/footer.html");</script>
      </footer>
    </div>
  </div>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
</body>

</html>