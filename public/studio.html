<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <meta name="robots" content="noindex">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <link rel="stylesheet" type="text/css" href="style/style.css">

  <link rel="shortcut icon" href="./images/ファビコン (logo)/favicon.ico">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script type="text/javascript" src="./javascript/fademover.js"></script>
  <script type="text/javascript" src="./javascript/index.js"></script>
  <script type="text/javascript" src="./javascript/studio.js"></script>
  <script type="text/javascript" src="./javascript/language.js"></script>
  <title>STUDIO｜東京都立大学システムデザイン学部インダストリアルアート学科/学域</title>

  <style>
    .carousel .item {
      background: #F9F9F9;
      border: 1px solid #E0E0E0;
      overflow: hidden;
      margin-bottom: 1em;
      margin-top: 1em;
      padding: 5px;
    }

    .carousel-inner>.item>img {
      border: 1px solid #DDDDDD;
      float: left;
      margin: 0pt 3px;
      padding: 2px;
      height: none;
      width: 100%;
    }

    .carousel-inner>.item>img:hover {
      border: 1px solid #000000;
    }
  </style>
  <!-- font -->
  <script>
    (function (d) {
      var config = {
        kitId: 'eby3bgi',
        scriptTimeout: 3000,
        async: true
      },
        h = d.documentElement, t = setTimeout(function () { h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive"; }, config.scriptTimeout), tk = d.createElement("script"), f = false, s = d.getElementsByTagName("script")[0], a; h.className += " wf-loading"; tk.src = 'https://use.typekit.net/' + config.kitId + '.js'; tk.async = true; tk.onload = tk.onreadystatechange = function () { a = this.readyState; if (f || a && a != "complete" && a != "loaded") return; f = true; clearTimeout(t); try { Typekit.load(config) } catch (e) { } }; s.parentNode.insertBefore(tk, s)
    })(document);
  </script>

  <script type="text/javascript">
    window.onload = function () {

      var url = new URL(window.location.href);
      var params = url.searchParams;
      // スタジオ番号
      console.log(params.get('id'));
      var id_studio;
      if (!params.get('id')) {
        id_studio = "all";
      }
      else {
        id_studio = params.get('id');
      }

      if (id_studio == 'all') {
        let loadHTML = new Promise(function (resolve, reject) {
          // ia wiki から topicsデータを取得する
          {
            var url = 'http://industrial-art.sd.tmu.ac.jp/wiki/doku.php\?id=website:studio';
            var regexp = '@<!-- CONTENT -->(.*?)<!-- \/CONTENT -->@s';
            var _html = './php/scrape.php?regexp=' + regexp + '&url=' + url;
            var replace = 'studios';
            //Httpリクエスを作る
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", _html, true);
            xmlhttp.onreadystatechange = function () {
              //とれた場合Idにそって入れ替え
              if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var data = xmlhttp.responseText;
                //xmlhttp.responseXML
                //console.log(data);
                var elem = document.getElementById(replace);
                elem.innerHTML = data;
                resolve(data);
                //return data;
              }
            }
            xmlhttp.send(null);
          }
        });
        loadHTML.then(function () {

          var ols = document.querySelector('.dw-content').querySelectorAll('ol');
          for (ol of ols) {
            var lis = ol.querySelectorAll('li');
            // [0]：id
            // [1]：名前（ホバー時文字）
            // [2]：スタジオ名
            // [3]：写真リンク
            let id = lis[0].querySelector('.li').innerHTML;
            let studio_name_hover = lis[1].querySelector('.li').innerHTML;
            let studio_name = lis[2].querySelector('.li').innerHTML;
            let image = lis[3].querySelector('.li').innerHTML;
            let image_src;
            if (lis[3].querySelector('.li').querySelector('a')) {
              image_src = lis[3].querySelector('.li').querySelector('a').href;
            }
            else {
              image_src = "https://placehold.jp/5c5c5c/ffffff/300x300.png?text=no%20image";
            }

            let section_studio = document.createElement('section');
            section_studio.classList = 'studio';
            document.querySelector('#studios').appendChild(section_studio);
            let div = document.createElement('div');
            section_studio.appendChild(div);
            let img = document.createElement('img');
            img.style.visibility = 'hidden'; img.style.visibility = 'hidden';
            img.src = image_src;
            div.appendChild(img);
            let a = document.createElement('a');
            a.href = url.href + '?id=' + id.trim(' ');

            div.appendChild(a);
            let section_mask = document.createElement('section');
            section_mask.classList = 'mask';
            a.appendChild(section_mask);
            let p = document.createElement('p');
            p.innerHTML = studio_name_hover;
            section_mask.appendChild(p);

            let h3 = document.createElement('h3');
            h3.innerHTML = studio_name;
            section_studio.appendChild(h3);

            // img.srcが読み込み終わったら表示してあげる
            // カード画像は全部ロードが終わった後並べ替え作業をする
            img.onload = function () {
              img.style.visibility = 'visible';
              img.classList = 'fadeIn';
              console.log("loaded", img);
            }
            //console.log(section_studio);
            //ol.remove();
          }
          initLanguage();

          document.querySelector('.dw-content').remove();
        });

      }
      else {
        // <section class="left">
        //     <div class="title">
        //       <div class="titleText">
        //         <h2 class="ja">スタジオ名</h2>
        //         <h3 class="en">Studio Name</h3>
        //         <h4 class="ja">分野</h4>
        //         <h4 class="en">Core</h4>
        //       </div>
        //     </div>
        //     <div class="viewer"></div>
        //     <p class="info">スタジオ紹介</p>
        //     <h3 class="ja oc-video-head">研究室紹介動画</h2>
        //       <div class="youtube">
        //         <iframe id="oc_video" src="https://www.youtube.com/embed/X1uZHs7vxOo" title="YouTube video player"
        //           frameborder="0"
        //           allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        //           allowfullscreen></iframe>
        //       </div>
        //   </section>

        let loadHTML = new Promise(function (resolve, reject) {
          // ia wiki から topicsデータを取得する
          {
            var url = 'http://industrial-art.sd.tmu.ac.jp/wiki/doku.php\?id=website:studio:' + id_studio;
            var regexp = '@<!-- CONTENT -->(.*?)<!-- \/CONTENT -->@s';
            var _html = './php/scrape.php?regexp=' + regexp + '&url=' + url;
            var replace = 'labview';
            console.log(url);
            //Httpリクエスを作る
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", _html, true);
            xmlhttp.onreadystatechange = function () {
              //とれた場合Idにそって入れ替え
              if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var data = xmlhttp.responseText;
                //xmlhttp.responseXML
                //console.log(data);
                var elem = document.getElementById(replace);
                elem.innerHTML = data;
                resolve(data);
                //return data;
              }
            }
            xmlhttp.send(null);
          }
        });
        loadHTML.then(function () {
          //  <section class="left">
          //   <div class="title">
          //     <div class="titleText">
          //       <h2 class="ja">スタジオ名</h2>
          //       <h3 class="en">Studio Name</h3>
          //       <h4 class="ja">分野</h4>
          //       <h4 class="en">Core</h4>
          //     </div>
          //   </div>
          //   <div class="viewer"></div>
          //   <p class="info">スタジオ紹介</p>
          //   <h3 class="ja oc-video-head">研究室紹介動画</h2>
          //     <div class="youtube">
          //       <iframe id="oc_video" src="https://www.youtube.com/embed/X1uZHs7vxOo" title="YouTube video player"
          //         frameborder="0"
          //         allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          //         allowfullscreen></iframe>
          //     </div>
          // </section> 
          let lis = document.querySelector('.dw-content').querySelector('ol').querySelectorAll('li');
          let studio_name = lis[0].querySelector('div').innerHTML;
          let core_name = lis[1].querySelector('div').innerHTML;
          let teacher_name = lis[2].querySelector('div').innerHTML;
          let teacher_position = lis[3].querySelector('div').innerHTML;
          let image = lis[4].querySelector('a').href;
          let url_youtube = lis[5].querySelector('a').href;
          let abstract = lis[6].querySelector('div').innerHTML;


          let section_left = document.createElement('section');
          section_left.classList = 'left';
          document.querySelector('#labview').appendChild(section_left);
          let div_title = document.createElement('div');
          div_title.classList = 'title';
          section_left.appendChild(div_title);
          let div_titleText = document.createElement('div');
          div_titleText.classList = 'titleText';
          div_title.appendChild(div_titleText);
          let h2_ja = document.createElement('h2');
          h2_ja.classList = 'ja'
          div_titleText.appendChild(h2_ja);
          h2_ja.innerHTML = studio_name;

          let h4_ja = document.createElement('h4');
          h4_ja.classList = 'ja';
          h4_ja.innerHTML = core_name;
          div_titleText.appendChild(h4_ja);

          let img = document.createElement('img');
          //img.classList = 'img-fluid rounded';
          img.style = 'width:100%';
          img.src = image;
          section_left.appendChild(img);

          let p = document.createElement('p');
          p.classList = 'info';
          p.innerHTML = abstract;
          section_left.appendChild(p);

          //   <section class="right">
          //   <h3>担当教員</h3>
          // </section>
          let section_right = document.createElement('section');
          section_right.classList = 'right';
          document.getElementById('labview').appendChild(section_right);
          let h3 = document.createElement('h3');
          h3.innerHTML = '<ja>担当教員</ja><en>Directed by</en>';
          section_right.appendChild(h3);
          let p_teacher_name = document.createElement('p');
          p_teacher_name.innerHTML = teacher_name + "<br>" + teacher_position;
          section_right.appendChild(p_teacher_name);

          // <h3 class="ja oc-video-head">研究室紹介動画</h2>
          //   <div class="youtube">
          //     <iframe id="oc_video" src="https://www.youtube.com/embed/X1uZHs7vxOo" title="YouTube video player"
          //       frameborder="0"
          //       allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          //       allowfullscreen></iframe>
          let h3_oc_video_head = document.createElement('h3');
          h3_oc_video_head.innerHTML = '<ja>研究室紹介動画</ja><en>Studio Introduction Video</en>';
          section_left.appendChild(h3_oc_video_head);
          let div_youtube = document.createElement('div');
          div_youtube.classList = 'youtube';
          section_left.appendChild(div_youtube);
          let iframe = document.createElement('iframe');
          iframe.id = 'oc_video';
          iframe.src = url_youtube;
          div_youtube.appendChild(iframe);
          document.querySelector('.dw-content').remove();
          initLanguage();

        });
      }

    }
  </script>
</head>

<body>
  <header id="global-head">
    <script>
      $("#global-head").load("./parts/header.html");
    </script>
  </header>

  <div id="nav-toggle">
    <div>
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <aside id="sidebar">
    <nav id="global-nav">
      <script type="text/javascript" src="./javascript/menu.js"></script>
    </nav>
  </aside>

  <div class="wrapper">
    <div class="centering">
      <main>


        <h2 class="page-title"><a style="text-decoration:none;color:#000000" href="./studio.html">Studio</a><span>
            <ja>研究室紹介</ja>
            <en>Brief Introduction</en>
          </span></h2>
        <div class="studios" id="studios"></div>
        <div class="labview" id="labview">

        </div>
    </div>


    <!-- <div class="studios">

          <section class="studio">
            <div><img src="./images/studio-images/ed1.png" alt="portrait">
              <a href="labview.html?id=editorial">
                <section class="mask">
                  <p>Editorial <br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=editorial">エディティングスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/es2.png" alt="portrait">
              <a href="labview.html?id=equipment">
                <section class="mask">
                  <p>Equipment & Service<br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=equipment">製品・サービスデザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/ergo1.jpg" alt="portrait">
              <a href="labview.html?id=ergonomics">
                <section class="mask">
                  <p>Ergonomics<br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=ergonomics">エルゴノミックデザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/ia1.png" alt="portrait">
              <a href="labview.html?id=interactive">
                <section class="mask">
                  <p>Interactive <br>Art Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=interactive">インタラクティブアートスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/baba2.png" alt="portrait">
              <a href="labview.html?id=interface">
                <section class="mask">
                  <p>Interface<br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=interface">インタフェースデザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/id1.jpg" alt="portrait">
              <a href="labview.html?id=interior">
                <section class="mask">
                  <p>Interior<br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=interior">インテリアデザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/kd2.png" alt="portrait">
              <a href="labview.html?id=kinematograph">
                <section class="mask">
                  <p>Kinematograph<br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=kinematograph">映像デザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/nd1.png" alt="portrait">
              <a href="labview.html?id=network">
                <section class="mask">
                  <p>Network <br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=network">ネットワークデザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/sd1.jpg" alt="portrait">
              <a href="labview.html?id=software">
                <section class="mask">
                  <p>Software <br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=software">ソフトウェアデザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/spatial1.jpg" alt="portrait">
              <a href="labview.html?id=spatial">
                <section class="mask">
                  <p>Spatial<br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=spatial">空間デザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/td2.png" alt="portrait">
              <a href="labview.html?id=transportation">
                <section class="mask">
                  <p>Transportation <br>Design Studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=transportation">トランスポーテーション<br>デザインスタジオ</a></h3>
          </section>

          <section class="studio">
            <div><img src="./images/studio-images/vc1.jpg" alt="portrait">
              <a href="labview.html?id=visual">
                <section class="mask">
                  <p>Visual<br>Communication<br>Design studio</p>
                </section>
              </a>
            </div>
            <h3><a href="labview.html?id=visual">ヴィジュアルコミュニケーション<br>デザインスタジオ</a></h3>
          </section>



        </div> -->

    </main>

    <footer>
      <script>
        $("footer").load("./parts/footer.html");
      </script>
    </footer>
  </div>
  </div>
  <section class="scroll-top"><img src="./images/page-top.svg" art="image">
    <p>PageTop</p>
  </section>
  <script>
    // 画像ダウンロード//https://qumeru.com/magazine/408
    function downloadImg() {
      // ファイル情報
      const url = './images/ia_oc2021_vertualbg.jpg';
      const fileName = 'ia_oc2021_vertualbg.jpg';

      // IE用
      if (window.navigator.msSaveOrOpenBlob) {
        let xhr = new XMLHttpRequest();
        xhr.open('GET', url);
        xhr.responseType = 'blob';
        xhr.onload = function () {
          if (xhr.status !== 200) {
            return false;
          }
          window.navigator.msSaveOrOpenBlob(xhr.response, fileName);
        }
        xhr.send();
      } else { // Chromeなど
        let link = document.getElementById("download");
        link.href = url;
        link.download = fileName;
      }
    }
  </script>

</body>

</html>